<html>
<head>
	<meta charset="UTF-8" />

	<title>Tutoriel ARC | Mubiz</title>

	<meta name="description"    content="Tutoriel ARC par/pour Mubiz"/>
	<meta name="keywords"       content="Tutoriel, ARC, Mubiz"/>
	
	<meta name="robots"         content="index,follow"/>
	<meta name="rating"         content="safe for kids"/>
	<meta name="revisit-after"  content="14 days"/>
	<meta name="author"         content="Mubiz"/>

	<meta name="geo.placename"	content="France"/>

	<meta property="og:type"		content="website"/>
	<meta property="og:site_name"	content="GitHub - MubizInc"/>
	<meta property="og:locale"		content="fr_FR"/>

	<meta name="theme-color" content="#009999">
	
	<link rel="shortcut icon"   					type="image/ico"	href="/images/favicon.png" 	/>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, target-densitydpi=device-dpi"/>
	
	
	<link rel="stylesheet"    		media="all"		type="text/css" 	href="/style/style_screen.css"   />
	
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<meta name="created" content="00:00:00">
	<meta name="changed" content="2017-01-11T16:22:57.811000000"/>

	<!-- Optional theme -->
	<style type="text/css">
		blockquote{ word-wrap: break-word; }
	</style>
</head>
<body lang="en-US" text="#333333" link="#337ab7" vlink="#337ab7" bgcolor="#ffffff" dir="ltr">
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a href="/" class="navbar-brand" rel="home" title=""><img style="max-width:100px;" src="http://mubiz.com/images/mubiz/mubiz-logo-white.png" alt="Mubiz logo"/></a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li><a href="/3a" title="TP 3A">3e année</a></li>
					<li><a href="/4a" title="TP 4A">4e année</a></li>
					<li class="active"><a title="Tutoriel ARC">Tutoriel ARC</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="container theme-showcase" role="main">
		<div class="jumbotron">
			<div id="up" dir="ltr">
				<h1>Synthèse sur l'utilisation des WS</h1>
			</div>
			<h2>Objectif</h2>
			<p>
				Apporter des précisions et des indications sur l'utilisation des outils dans &ldquo;<i><b>ethereum-ws</b></i>&rdquo; par l'intermédiaire
				de l'application <b>ARC</b>.
			</p>
		</div>

		<nav class="navbar navbar-default">
			<div class="container">
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="#comparc" title="Installation">Compilation dans ARC</a></li>
						<li><a href="#deplarc" title="Déploiement dans ARC">Déploiement dans ARC</a></li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="page-header" id="comparc">
			<h2>Compilation dans ARC (<a href="#up">up</a>)</h2>
		</div>
		<p>On utilise la requète "Solidity Compiler".</p>
		<ol>
			<li>Vérifier que le Content-Type est bien &ldquo;Text/Plain&rdquo;.<li/>
		
		<p>Dans l'onglet
				&ldquo;RAW Payload&rdquo;, coller directement le code Solidity.</p>
				<li/>
		<p>Si la réponse
				est &ldquo;200&rdquo; (OK), on trouve en fin de retour du code
				indenté les différents éléments utiles
				à récupérer afin de déployer par la
				suite le contrat compilé. Ces différents éléments
				seront :</p>
				<ol type="a">
					<li/>
		<p>&ldquo;<font size="3" style="font-size: 12pt">bytecode&rdquo;
					(&ldquo;data&rdquo;).</font></p>
					<p><font size="3" style="font-size: 12pt">Exemple avec le bytecode
					du premier contrat en production de Smoothie :</font></p>
					<p><blockquote><code>606060405234610000576040516020806101b583398101604052515b60008054600160a060020a0319166c010000000000000000000000003381020417808255600160a060020a031681526001602052604090208190555b505b61014e806100676000396000f3606060405260e060020a600035046302d05d3f811461003457806370a082311461005d578063a9059cbb1461007f575b610000565b3461000057610041610094565b60408051600160a060020a039092168252519081900360200190f35b346100005761006d6004356100a3565b60408051918252519081900360200190f35b34610000576100926004356024356100b5565b005b600054600160a060020a031681565b60016020526000908152604090205481565b8015156100c157610000565b33600160a060020a031682600160a060020a031614156100e057610000565b600160a060020a03821615156100f557610000565b600160a060020a0333166000908152600160205260409020548190101561011b57610000565b600160a060020a0380831660009081526001602052604080822080548501905533909216815220805482900390555b505056</code></blockquote></p>
					<li/>
		<p>&ldquo;interface&rdquo;
					(&ldquo;abi&rdquo; format JSON).</p>
					<p><font size="3" style="font-size: 12pt">Exemple avec l'interface
					du premier contrat en production de Smoothie:</font></p>
					<p><blockquote><code>[{"constant":true,"inputs":[],"name":"creator","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"dest","type":"address"},{"name":"quantity","type":"uint256"}],"name":"transfer","outputs":[],"payable":false,"type":"function"},{"inputs":[{"name":"totalShares","type":"uint256"}],"payable":false,"type":"constructor"}]</code></blockquote></p>
				</ol>
			</ol>





		<div class="page-header" id="deplarc">
			<h2>Déploiement dans ARC (<a href="#up">up</a>)</h2>
		</div>
			<p><font size="3" style="font-size: 12pt">On utilise la requète
			"Contract creation".</font></p>
			<ol>
				<li/>
		<p><font size="3" style="font-size: 12pt">Vérifier le
				<i>Content-Type</i> !</font></p>
				<li/>
		<p><font size="3" style="font-size: 12pt">La valeur
				&ldquo;interface&rdquo; doit &ecirc;tre convertie pour </font><font size="3" style="font-size: 12pt"><b>PHP</b></font>
				<font size="3" style="font-size: 12pt">5.6.29 afin d'&ecirc;tre
				attribuée à &ldquo;abi&rdquo; par la suite. On peut
				par exemple utiliser l'application web suivante :
				<a href="http://json_encode.onlinephpfunctions.com/">http://json_encode.onlinephpfunctions.com/</a></font></p>
				<p><font size="3" style="font-size: 12pt">Exemple avec l'interface
				rendue dans la partie précédente (<a href="#comparc">Compilation
				dans ARC</a>) :</font></p>
				<p><blockquote><code>"abi":"[{\"constant\":true,\"inputs\":[],\"name\":\"creator\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"dest\",\"type\":\"address\"},{\"name\":\"quantity\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"totalShares\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"constructor\"}]"</code></blockquote></p>
				<li/>
		<p><font size="3" style="font-size: 12pt">Les valeurs à
				transmettre seront :</font></p>
				<ol type="a">
					<li/>
		<p>&ldquo;abi&rdquo;
					au format transcrit pour <b>PHP</b>
					5.6.29. (voir point 2.).</p>
					<li/>
		<p>&ldquo;from&rdquo;
					: Adresse hash Ethereum de l'entreprise qui déploie
					le contrat.</p>
					<li/>
		<p>&ldquo;data&rdquo;
					: Le bytecode.</p>
					<li/>
		<p>&ldquo;tokens&rdquo;
					: Tokens de l'entreprise pour le contrat.</p>
					<li/>
		<p>&ldquo;amount&rdquo;
					: Valeur par défaut indexée sur le gaz consommé
					pour déployer le contrat (0.2 avec le premier contrat en
					production).</p>
					<li/>
		<p>&ldquo;passphrase&rdquo;
					: Le mot de passe du compte &ldquo;from&rdquo;, c'est-à-dire
					le mot de passe de l'entreprise qui permet de débloquer
					le déploiement du contrat.</p>
				</ol>
				<li/>
		<p>La méthode
				employée est POST. Le format du &ldquo;RAW Payload&rdquo;
				est donc :</p>
				<p><blockquote><code>{"abi":"abi_format_pour_php_5.6.29",
				"from":"0x12345...", "data":"bytecode",
				"tokens":54321, "amount":0.2,
				"passphrase":"mot_2_passe"}</code></blockquote></p>
				<p><font size="3" style="font-size: 12pt">Exemple avec le
				déploiement du premier contrat en production de Smoothie :</font></p>
				<p><blockquote><code>{"abi":"[{\"constant\":true,\"inputs\":[],\"name\":\"creator\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"dest\",\"type\":\"address\"},{\"name\":\"quantity\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"totalShares\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"constructor\"}]",
				"from":"0x938fd640696a468040999872b0bd820d4e5ed422",
				"data":"606060405234610000576040516020806101b583398101604052515b60008054600160a060020a0319166c010000000000000000000000003381020417808255600160a060020a031681526001602052604090208190555b505b61014e806100676000396000f3606060405260e060020a600035046302d05d3f811461003457806370a082311461005d578063a9059cbb1461007f575b610000565b3461000057610041610094565b60408051600160a060020a039092168252519081900360200190f35b346100005761006d6004356100a3565b60408051918252519081900360200190f35b34610000576100926004356024356100b5565b005b600054600160a060020a031681565b60016020526000908152604090205481565b8015156100c157610000565b33600160a060020a031682600160a060020a031614156100e057610000565b600160a060020a03821615156100f557610000565b600160a060020a0333166000908152600160205260409020548190101561011b57610000565b600160a060020a0380831660009081526001602052604080822080548501905533909216815220805482900390555b505056",
				"tokens":1000, "amount":0.2,
				"passphrase":"passphrase"}</code></blockquote></p>
			</ol>
		
	</div>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</body>
</html>