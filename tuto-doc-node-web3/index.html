<html>
<head>
	<meta charset="UTF-8" />

	<title>Tutoriel ARC | Mubiz</title>

	<meta name="description"    content="Tutoriel ARC par/pour Mubiz"/>
	<meta name="keywords"       content="Tutoriel, ARC, Mubiz"/>
	
	<meta name="robots"         content="index,follow"/>
	<meta name="rating"         content="safe for kids"/>
	<meta name="revisit-after"  content="14 days"/>
	<meta name="author"         content="Mubiz"/>

	<meta name="geo.placename"	content="France"/>

	<meta property="og:type"		content="website"/>
	<meta property="og:site_name"	content="GitHub - MubizInc"/>
	<meta property="og:locale"		content="fr_FR"/>

	<meta name="theme-color" content="#009999">
	
	<link rel="shortcut icon"   					type="image/ico"	href="/images/favicon.png" 	/>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, target-densitydpi=device-dpi"/>
	
	<link rel="stylesheet"    		media="all"		type="text/css" 	href="../styles/design.css"   />

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<meta name="created" content="00:00:00">
	<meta name="changed" content="2017-01-11T16:22:57.811000000"/>

	<!-- Optional theme -->
	<style type="text/css">
		blockquote{ word-wrap: break-word; }
	</style>
</head>
<body lang="en-US" text="#333333" link="#337ab7" vlink="#337ab7" bgcolor="#ffffff" dir="ltr">
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a href="/" class="navbar-brand" rel="home" title=""><img style="max-width:100px;" src="http://mubiz.com/images/mubiz/mubiz-logo-white.png" alt="Mubiz logo"/></a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li><a href="/3a" title="TP 3A">3e année</a></li>
					<li><a href="/4a" title="TP 4A">4e année</a></li>
					<li><a href="/solidity" title="Bases concernant le language Solidity">Solidity</a></li>
					<li><a href="/tuto-arc" title="Tutoriel ARC">Tutoriel ARC</a></li>
					<li class="active"><a title="Tutoriel Web3.js">Tutoriel Web3.js</a></li>
					<li><a href="/lexique" title="Lexique Blockchain">Lexique Blockchain</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="container theme-showcase" role="main">
		<div class="jumbotron">
			<div id="up" dir="ltr">
				<h1>Installation et utilisation d'un node Ethereum local</h1>
			</div>
			<h2>Objectif</h2>
			<p>
				Mettre en place un node Ethereum afin d'y déployer des contrats Solidity et les tester.
			</p>
		</div>

		<nav class="navbar navbar-default">
			<div class="container">
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="#NodeJs" title="Installation de Node.js">Installation de Node.js</a></li>
						<li><a href="#Web3Js" title="Installation de Web3.js">Installation de Web3.js</a></li>
						<li><a href="#TestRPC" title="Installation de TestRPC">Installation de TestRPC</a></li>
						<li><a href="#Init" title="Lancements et commandes de base">Lancements et commandes de base</a></li>
						<li><a href="#CreationContrat" title="Création d'un contrat">Création d'un contrat</a></li>
						<li><a href="#AppelFonction" title="Appel d'une fonction d'un contrat">Appel d'une fonction d'un contrat</a></li>
						<li><a href="#AppelObjet" title="Appel d'un objet d'un contrat">Appel d'un objet d'un contrat</a></li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="page-header" id="NodeJs">
			<h2>Installation de Node.js (<a href="#">up</a>)</h2>
		</div>
		<p>Le gestionnaire de paquets de <b>Node.js</b> est « <b>npm</b> » (Node.js Packages Manager).</p>
		<ol>
			<li><b>Windows</b>
				<p>Télécharger Node.js à l'adresse : http://nodejs.org/en/download/</p>
				<p>Il est préférable de prendre la version « Stable » pour avoir toutes les fonctionnalités.</p>
				<p>En ligne de commande, vérifications des versions :</p>
				<p><blockquote><code>C:\> node --version</code></blockquote></p>
				<p><blockquote><code>C:\> npm --version</code></blockquote></p>
			<li><b>MAC</b>
				<p>Idem que Windows.</p>
			<li><b>Linux</b>
				<p><blockquote><code>$ curl -sL https://deb.nodesource.com/setup_#.x | sudo -E bash -</code></blockquote></p>
				<p>Remplacer <b>#</b> par le numéro de la dernière version.</p>
				<p><blockquote><code>$ sudo apt install nodejs</code></blockquote></p>
				<p>npm sera installé avec la dernière version en même temps avec cette méthode.</p>
				<p>Vérifications des versions :</p>
				<p><blockquote><code>$ node --version</code></blockquote></p>
				<p><blockquote><code>$ npm --version</code></blockquote></p>
			

			<div style="text-align:center;">
				<p><img src="images/.jpg" width="1000" height="400"></p>
			</div>
		

		</ol>
		<div class="page-header" id="Web3Js">
			<h2>Installation de WEB3.JS comme paquet de NODE.JS (<a href="#">up</a>)</h2>
		</div>
		<h4>Recherche d'un paquet</h4>
		<p>Il faut tout d'abord faire la recherche du paquet (afin de reconstruire l’index). La recherche peut être un peu longue. Elle se lance à partir de l'invite de commande de base, avec la commande :</p>
		<p><blockquote><code>npm search web3</code></blockquote></p>
		<p>
		<h4>Deux types d’installation possibles d’un paquet :</h4>
			<ol>
				<li>Installation « <b>locale</b> » dans le projet courant :
					<p><blockquote><code>npm install web3</code></blockquote></p>
				<li>Installation « <b>globale</b> » accessible depuis n’importe quel dossier du système (ou presque… On verra par la suite...) :
					<p><blockquote><code>npm install -g web3</code></blockquote></p>
			</ol>
		<h4>Lister les modules installés :</h4>
		<p>
			<ol>
				<li>En « <b>local</b> » :
					<p><blockquote><code>npm list</code></blockquote></p>
				<li>En « <b>global</b> » :
					<p><blockquote><code>npm -g list</code></blockquote></p>
			</ol>
		</p>
		<h4>Mettre à jour un module ou tous les modules :</h4>
		<p>
			<ol>
				<li>En « <b>local</b> » :
					<ol type="a">
						<li><b>Un module :</b>
							<p><blockquote><code>npm update web3</code></blockquote></p>
						<li><b>Tous les modules :</b>
							<p><blockquote><code>npm update</code></blockquote></p>
					</ol>
				<li>En « <b>global</b> » :
					<ol type="a">
						<li><b>Un module</b> :
							<p><blockquote><code>npm -g update web3</code></blockquote></p>
						<li><b>Tous les modules</b> :
							<p><blockquote><code>npm -g update</code></blockquote></p>
					</ol>
			</ol>
		</p>


		<p><hr width="75%"></p>
			<div style="text-align:center;">
					<p><img src="images/.jpg"  width="10" height="10"></p>
			</div>
		<p><hr width="75%"></p>


		<div class="page-header" id="TestRPC">
			<h2>Installation de Test RPC afin de créer un nœud Ethereum local de test (<a href="#">up</a>)</h2>
		</div>
		<p><b>Windows</b>
			<ol>
				<li>Installer Visual Studio Community Edition. Pour une installation personnalisée, le minimum est tout ce qui est lié à Visual C++.
				<li>Installer Windows SDK for Windows 8.1
				<li>Installer Python 2.7 si ce n’est pas déjà fait, et ajouter son dossier d'installation au PATH.
				<li>Installer OpenSSL ici (pas la version light). <b>Ne pas changer le dossier d’installation et laisser celui par défaut</b>. 
				<li>Créer un dossier "tmp" à la racine du disque par défaut (ceci ne semble pas nécessaire à 100 %).
			</ol>
		</p>
		<div class="page-header" id="Init">
			<h2>Lancer le node et initier Web3 (<a href="#">up</a>)</h2>
		</div>
		<ol>
			<li/><p>Obtenir la balance en jetons d'un compte à l'intérieur d'un contrat.</p>
			<p>Requète "<b>Internal Balance</b>" en méthode <b>POST</b>.</p>
				<p>Ne pas oublier de vérifier le <b><i>Content-Type</i></b> qui doit être positionné sur "<b>application/json</b>".
				<br>
				<div style="text-align:center;">
					<p><img src="images/ARC_Internal_Balance.jpg"></p>
				</div>
				<br>
				<p>Il faut spécifier dans le payload <b>l'interface/abi</b> du contrat, l'<b>adresse</b> du contrat, et enfin, l'<b>adresse Ethereum</b> du compte dont on veut la <b>balance en jetons</b>.</p>
				<p>Exemple de payload :</p>
				<p>La réponse obtenue est la <b>balance en <i>jetons</i></b> du compte choisi à l'intérieur du contrat.</p>
				<br>
			<li/><p>Réaliser un transfert de jetons d'un compte à un autre à l'intérieur d'un contrat.</p>
			<p>Requète "<b>Internal Tx</b>" en méthode <b>POST</b>.</p>
				<p>Ne pas oublier de vérifier le <b><i>Content-Type</i></b> qui doit être positionné sur "<b>application/json</b>".
				<br>
				<div style="text-align:center;">
					<p><img src="images/ARC_Internal_Tx.jpg"></p>
				</div>
				<br>
				<p>Les différents paramètres à fournir sont :</p>
				<ol type="a">
					<li/><p><b>"to"</b> : Adresse Ethereum destination des tokens dans le contrat.</p>
					<li/><p><b>"from"</b> : Adresse Ethereum expéditeur des tokens dans le contrat.</p>
					<li/><p><b>"passphrase"</b> : Bien sûr, le mot de passe de l'expéditeur.</p>
					<li/><p><b>"contract"</b> : Adresse Ethereum du contrat en question.</p>
					<li/><p><b>"tokens"</b> : Le nombre de jetons transférés dans le contrat.</p>
					<li/><p><b>"abi"</b> : L'interface format PHP 5.6.29...</p>
				</ol>
				<br>
				<p>Exemple de payload :</p>
				<p><blockquote><code>Bleh</code></blockquote></p>
		</ol>
	</div>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</body>
</html>